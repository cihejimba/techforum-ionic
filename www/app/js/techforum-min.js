document.addEventListener("deviceready",function(){console.log("Cordova - Launch App techForum - deviceReady"),navigator.splashscreen.hide()},!1),ionic.Platform.ready(function(){console.log("Ionic - Launch App techForum - deviceReady")});var app=angular.module("app",["ionic","ngResource","techForum.filters","google-maps"]);app.config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("tab",{url:"/tab","abstract":!0,templateUrl:"views/layouts/tabs.html"}).state("tab.home",{url:"/home",views:{"home-tab":{templateUrl:"views/partials/home.html",controller:"HomeController"}}}).state("tab.conferences",{url:"/conferences",views:{"conferences-tab":{templateUrl:"views/partials/conferences.html",controller:"ConferencesController"}}}).state("tab.conference-detail",{url:"/conference/:conferenceId",views:{"conferences-tab":{templateUrl:"views/partials/detail_conference.html",controller:"DetailConferenceController"}}}).state("tab.agenda",{url:"/agenda",views:{"agenda-tab":{templateUrl:"views/partials/agenda.html",controller:"AgendaController"}}}).state("tab.agenda-conference-schedule",{url:"/agenda/conferences/:day/:schedule",views:{"agenda-tab":{templateUrl:"views/partials/conference_by_schedule.html",controller:"ConferencesByScheduleController"}}}).state("tab.conference-detail-agenda",{url:"/conference-agenda/:conferenceId",views:{"agenda-tab":{templateUrl:"views/partials/detail_conference.html",controller:"DetailConferenceController"}}}).state("tab.access",{url:"/access",views:{"access-tab":{templateUrl:"views/partials/access_map.html",controller:"AccessController"}}}),b.otherwise("/tab/home")}]),angular.module("app").controller("AccessController",["$scope",function(a){console.log("--- AccessController ---"),a.fromLilleFlandre=!1,a.fromlesquin=!1,a.displayFrom=function(b){if("lille"==b){a.fromLilleFlandre=a.fromLilleFlandre?!1:!0}else if("lesquin"==b){a.fromlesquin=a.fromlesquin?!1:!0}else alert("Impossible to display From "+b)},a.worldlineGPS={latitude:50.567593,longitude:3.029413},a.map={center:{latitude:a.worldlineGPS.latitude,longitude:a.worldlineGPS.longitude},markerWorldline:{latitude:a.worldlineGPS.latitude,longitude:a.worldlineGPS.longitude,showWindow:!0,title:"Worldine"},markerYou:{latitude:a.worldlineGPS.latitude,longitude:a.worldlineGPS.longitude,showWindow:!0,title:"Your Position"},zoom:14},a.locateWorldline=function(){a.map.center.latitude=a.worldlineGPS.latitude,a.map.center.longitude=a.worldlineGPS.longitude},a.getMyposition=function(){navigator.geolocation.getCurrentPosition(function(b){a.$apply(function(){a.map.markerYou.latitude=b.coords.latitude,a.map.markerYou.longitude=b.coords.longitude,a.map.center.latitude=b.coords.latitude,a.map.center.longitude=b.coords.longitude})},function(b){a.positioninfo=b})}}]),angular.module("app").controller("AgendaController",["$scope","ConferencesService","$state","$ionicPopup",function(a,b,c,d){console.log("--- AgendaController ---");var e=[],f=null;a.myAgenda=[],a.day={day1:1,day2:2};var g=function(c){a.mySchedule1=b.sortConferenceByStartByDay(c,a.day.day1),a.mySchedule2=b.sortConferenceByStartByDay(c,a.day.day2)};a.getAgendaAndConference=function(){var c=[];null===localStorage.getItem("conferences")?b.getConferencesResource().query(function(a){c=a,localStorage.setItem("conferences",JSON.stringify(c)),g(a)},function(){}):(c=JSON.parse(localStorage.getItem("conferences")),g(c)),null!==localStorage.getItem("myAgenda")&&(f=JSON.parse(localStorage.getItem("myAgenda")),angular.forEach(c,function(a){-1!=f.indexOf(a._id+"")&&e.push(a)}),g(c),a.myAgenda=e)},a.viewConference=function(a){c.go("tab.conference-detail",{conferenceId:a})},a.viewConferenceWithTime=function(a,b){c.go("tab.agenda-conference-schedule",{day:a,schedule:b})},a.onItemDelete=function(b){d.confirm({title:"Delete conference",content:"Do you want delete this conference on your agenda ?"}).then(function(c){if(c)if(null!==localStorage.getItem("myAgenda")){f=JSON.parse(localStorage.getItem("myAgenda"));var d=f.indexOf(b+"");for(-1!=d&&(f.splice(d,1),localStorage.setItem("myAgenda",JSON.stringify(f))),i=0;i<a.myAgenda.length;i++)a.myAgenda[i]._id==b&&a.myAgenda.splice(i,1)}else alert("Error - please can reload application")})}}]),angular.module("app").controller("ConferencesByScheduleController",["$scope","$stateParams","ConferencesService","$state",function(a,b,c,d){console.log("--- ConferencesByScheduleController ---"),a.day=b.day,a.schedule=b.schedule,a.backAgenda=function(){d.go("tab.agenda")},a.viewConference=function(a){d.go("tab.conference-detail-agenda",{conferenceId:a})},null===localStorage.getItem("conferences")?c.getConferencesResource().query(function(b){a.conferences=b,a.scheduleconferences=c.sortConferenceByStart(a.conferences)},function(){alert("Unable to retrieve conferences list")}):(a.conferences=JSON.parse(localStorage.getItem("conferences")),a.scheduleconferences=c.sortConferenceByStart(a.conferences))}]),angular.module("app").controller("ConferencesController",["$scope","ConferencesService","$ionicLoading","$state","$ionicPopup",function(a,b,c,d,e){console.log("--- ConferencesController ---"),a.conferences=[],a.scheduleconferences=[],a.numButton=1,a.selectedConferenceId=-1,a.getAllConf=function(){null===localStorage.getItem("conferences")?(a.loading=c.show({content:'<div>Loading conferences list<br><figure><img src="img/atos-loader.gif"/></figure></div>',animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0}),b.getLocalConferences().query(function(c){a.conferences=c,a.scheduleconferences=b.sortConferenceByStart(a.conferences),localStorage.setItem("conferences",JSON.stringify(c)),a.loading.hide()},function(){alert("Unable to retrieve conferences list"),a.loading.hide()})):(a.conferences=JSON.parse(localStorage.getItem("conferences")),a.scheduleconferences=b.sortConferenceByStart(a.conferences))},a.updateConference=function(){a.loading=c.show({content:'<div>Update conferences list<br><figure><img src="img/atos-loader.gif"/></figure></div>',animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0}),b.getOnlineConference().query(function(c){b.checkSameConferences(a.conferences,c)?(a.loading.hide(),e.alert({title:"Update conference",content:"You have already a last conference list"})):(a.conferences=c,b.setConferencesResource(c),localStorage.setItem("conferences",JSON.stringify(c)),a.loading.hide(),e.alert({title:"Update conference",content:"You have correctly update conference list"}))},function(){return a.loading.hide(),-1})},a.DisplayConference=function(b){a.selectedConferenceId=a.selectedConferenceId==b._id?-1:b._id},a.viewConference=function(a){d.go("tab.conference-detail",{conferenceId:a})}}]),angular.module("app").controller("DetailConferenceController",["$scope","$stateParams","ConferencesService","MessagesService","$ionicNavBarDelegate","AgendaService","$ionicPopup",function(a,b,c,d,e,f,g){console.log("--- DetailConferenceController ---");var h=b.conferenceId,i=[];a.comments=[],a.conference=[],a.loadingComment="loading...",a.showHideComment="show",a.newComment={name:null,msg:null},a.displayDescription=function(){a.showHideComment="show"==a.showHideComment?"hide":"show"},a.getConference=function(){c.getLocalConferences().query(function(b){i=b,angular.forEach(b,function(b){b._id==h&&(j(),a.conference=b)})},function(){alert("Enable to retrieve a conference with id "+h)})},a.postComment=function(b){var c=d.getOnlineMsgComment(),e=new c;e.name=a.newComment.name,e.msg=a.newComment.msg,e.type="comment",e.date=new Date,e.idConference=b,e.$save(function(){g.alert({title:"Send comment",content:"Your comment has been sent correctly."}).then(function(){j()})},function(){g.alert({title:"Send comment",content:"Impossible to send your comment"})}),a.newComment.name=null,a.newComment.msg=null};var j=function(){d.getOnlineMsgCommentByIdConference(h).query(function(b){a.comments=b,a.loadingComment=""},function(){a.loadingComment=""})};a.back=function(){e.back()},a.addAgenda=function(a){null===localStorage.getItem("myAgenda")?f.addToAgenda(a):f.checkSameScheduleConferenceInAgenda(a,i)===!1?f.addToAgenda(a):g.alert({title:"Impossible",content:"One conference already to add with the same to start"})}}]),angular.module("app").controller("HomeController",["$scope","DateService","ConferencesService","$state",function(a,b,c,d){console.log("--- HomeController ---");var e=new Date(2014,5,3),f=new Date(2014,5,4),g=new Date,h=new Date(g.getFullYear(),g.getMonth(),g.getDate());a.current_day={day:2},a.scheduleConferences=[],a.nextSchedule=null,a.time=b.dateDiff(g,e),a.current_day.day=0===b.compare(e,h)?1:0===b.compare(f,h)?2:0,a.getConf=function(){null===localStorage.getItem("conferences")?c.getLocalConferences().query(function(d){a.conferences=d,a.scheduleConferences=c.sortConferenceByStartByDay(d,a.current_day.day),a.nextSchedule=b.nextSchedule(a.scheduleConferences,g),localStorage.setItem("conferences",JSON.stringify(d))},function(){}):(a.conferences=JSON.parse(localStorage.getItem("conferences")),a.scheduleConferences=c.sortConferenceByStartByDay(a.conferences,a.current_day.day),a.nextSchedule=b.nextSchedule(a.scheduleConferences,g))},a.viewConference=function(a){d.go("tab.conference-detail",{conferenceId:a})}}]),angular.module("techForum.filters",[]).filter("scheduleByConference",function(){return function(a,b,c){var d=[];return angular.forEach(a,function(a){a.when.start==b&&a.day==c&&d.push(a)}),d}}),app.factory("AgendaService",["$ionicPopup",function(a){var b={addToAgenda:function(b){var c=[],d=!1;null===localStorage.getItem("myAgenda")?a.confirm({title:"Add conference",content:"Do you want add this conference on your agenda ?"}).then(function(a){a&&(c=[],c.push(b),localStorage.setItem("myAgenda",JSON.stringify(c)))}):(c=JSON.parse(localStorage.getItem("myAgenda")),angular.forEach(c,function(c){c==b&&(a.alert({title:"Impossible",content:"You are already to add this conference"}),d=!0)}),d===!1&&a.confirm({title:"Add conference",content:"Do you want add this conference on your agenda ?"}).then(function(a){a&&(c.push(b),localStorage.setItem("myAgenda",JSON.stringify(c)))}))},checkSameScheduleConferenceInAgenda:function(a,b){var c=null,d=!1,e=0,f=[],g=JSON.parse(localStorage.getItem("myAgenda"));for(i=0;i<b.length;i++)b[i]._id==a&&(c=b[i]),-1!=g.indexOf(b[i]._id+"")&&f.push(b[i]);for(;d===!1&&e<f.length;)f[e].when.start==c.when.start&&(console.log("Conference with the same start find !"),d=!0),e++;return console.log("Same schedule ? : "+d),d}};return b}]),app.factory("ConferencesService",["$resource",function(a){var b={conferencesResource:[],scheduleConference:[],getOnlineConference:function(){return b.conferencesResource=a("http://techforum-worldline.rhcloud.com//conferences/:id",{id:"@id"}),b.conferencesResource},getLocalConferences:function(){return b.conferencesResource=a("data/conferences.json"),b.conferencesResource},sortConferenceByStart:function(a){var c=[];return angular.forEach(a,function(a){-1==c.indexOf(a.when.start)&&c.push(a.when.start)}),b.scheduleConference=c.sort(),b.scheduleConference},sortConferenceByStartByDay:function(a,c){var d=[];return 0===c?d=[]:angular.forEach(a,function(a){-1==d.indexOf(a.when.start)&&a.day==c&&d.push(a.when.start)}),b.scheduleConference=d.sort(),b.scheduleConference},checkSameConferences:function(a,b){return angular.equals(a,b)},getScheduleConference:function(){return b.scheduleConference},setConferencesResource:function(a){b.conferencesResource=a},getConferencesResource:function(){return b.conferencesResource},conferenceResourceIsEmpty:function(){b.getConferencesResource().query(function(a){return null===a?!0:!1},function(){return!0})}};return b}]),app.factory("DateService",function(){var a={compare:function(a,b){var c=a.getTime()-b.getTime();return 0===c?c:c/Math.abs(c)},dateDiff:function(a,b){var c={},d=b-a;return d=Math.floor(d/1e3),c.sec=d%60,d=Math.floor((d-c.sec)/60),c.min=d%60,d=Math.floor((d-c.min)/60),c.hour=d%24,d=Math.floor((d-c.hour)/24),c.day=d,c},nextSchedule:function(a,b){var c=new Date(2014,5,5)-b;for(a.sort(),i=0;i<a.length;i++){heure=a[i].substring(0,2),minute=a[i].substring(3,5);var d=new Date(b.getFullYear(),b.getMonth(),b.getDate(),heure,minute);if(d>b){if(c>d-b)return c=a[i];console.log("NO d-date<res : "+d+"-"+b+"<"+c)}else console.log(" NO date < d : "+b+" < "+d)}}};return a}),app.factory("MessagesService",["$resource",function(a){var b={commentResource:[],getOnlineMsgCommentByIdConference:function(b){var c="http://techforum-worldline.rhcloud.com//messages/comments/"+b;return a(c)},getOnlineMsgComment:function(){return b.commentResource=a("http://techforum-worldline.rhcloud.com//messages/comments/"),b.commentResource}};return b}]),document.addEventListener("deviceready",function(){console.log("Cordova - Launch App techForum - deviceReady"),navigator.splashscreen.hide()},!1),ionic.Platform.ready(function(){console.log("Ionic - Launch App techForum - deviceReady")});var app=angular.module("app",["ionic","ngResource","techForum.filters","google-maps"]);app.config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("tab",{url:"/tab","abstract":!0,templateUrl:"views/layouts/tabs.html"}).state("tab.home",{url:"/home",views:{"home-tab":{templateUrl:"views/partials/home.html",controller:"HomeController"}}}).state("tab.conferences",{url:"/conferences",views:{"conferences-tab":{templateUrl:"views/partials/conferences.html",controller:"ConferencesController"}}}).state("tab.conference-detail",{url:"/conference/:conferenceId",views:{"conferences-tab":{templateUrl:"views/partials/detail_conference.html",controller:"DetailConferenceController"}}}).state("tab.agenda",{url:"/agenda",views:{"agenda-tab":{templateUrl:"views/partials/agenda.html",controller:"AgendaController"}}}).state("tab.agenda-conference-schedule",{url:"/agenda/conferences/:day/:schedule",views:{"agenda-tab":{templateUrl:"views/partials/conference_by_schedule.html",controller:"ConferencesByScheduleController"}}}).state("tab.conference-detail-agenda",{url:"/conference-agenda/:conferenceId",views:{"agenda-tab":{templateUrl:"views/partials/detail_conference.html",controller:"DetailConferenceController"}}}).state("tab.access",{url:"/access",views:{"access-tab":{templateUrl:"views/partials/access_map.html",controller:"AccessController"}}}),b.otherwise("/tab/home")}]),angular.module("app").controller("AccessController",["$scope",function(a){console.log("--- AccessController ---"),a.fromLilleFlandre=!1,a.fromlesquin=!1,a.displayFrom=function(b){if("lille"==b){a.fromLilleFlandre=a.fromLilleFlandre?!1:!0}else if("lesquin"==b){a.fromlesquin=a.fromlesquin?!1:!0}else alert("Impossible to display From "+b)},a.worldlineGPS={latitude:50.567593,longitude:3.029413},a.map={center:{latitude:a.worldlineGPS.latitude,longitude:a.worldlineGPS.longitude},markerWorldline:{latitude:a.worldlineGPS.latitude,longitude:a.worldlineGPS.longitude,showWindow:!0,title:"Worldine"},markerYou:{latitude:a.worldlineGPS.latitude,longitude:a.worldlineGPS.longitude,showWindow:!0,title:"Your Position"},zoom:14},a.locateWorldline=function(){a.map.center.latitude=a.worldlineGPS.latitude,a.map.center.longitude=a.worldlineGPS.longitude},a.getMyposition=function(){navigator.geolocation.getCurrentPosition(function(b){a.$apply(function(){a.map.markerYou.latitude=b.coords.latitude,a.map.markerYou.longitude=b.coords.longitude,a.map.center.latitude=b.coords.latitude,a.map.center.longitude=b.coords.longitude})},function(b){a.positioninfo=b})}}]),angular.module("app").controller("AgendaController",["$scope","ConferencesService","$state","$ionicPopup",function(a,b,c,d){console.log("--- AgendaController ---");var e=[],f=null;a.myAgenda=[],a.day={day1:1,day2:2};var g=function(c){a.mySchedule1=b.sortConferenceByStartByDay(c,a.day.day1),a.mySchedule2=b.sortConferenceByStartByDay(c,a.day.day2)};a.getAgendaAndConference=function(){var c=[];null===localStorage.getItem("conferences")?b.getConferencesResource().query(function(a){c=a,localStorage.setItem("conferences",JSON.stringify(c)),g(a)},function(){}):(c=JSON.parse(localStorage.getItem("conferences")),g(c)),null!==localStorage.getItem("myAgenda")&&(f=JSON.parse(localStorage.getItem("myAgenda")),angular.forEach(c,function(a){-1!=f.indexOf(a._id+"")&&e.push(a)}),g(c),a.myAgenda=e)},a.viewConference=function(a){c.go("tab.conference-detail",{conferenceId:a})},a.viewConferenceWithTime=function(a,b){c.go("tab.agenda-conference-schedule",{day:a,schedule:b})},a.onItemDelete=function(b){d.confirm({title:"Delete conference",content:"Do you want delete this conference on your agenda ?"}).then(function(c){if(c)if(null!==localStorage.getItem("myAgenda")){f=JSON.parse(localStorage.getItem("myAgenda"));var d=f.indexOf(b+"");for(-1!=d&&(f.splice(d,1),localStorage.setItem("myAgenda",JSON.stringify(f))),i=0;i<a.myAgenda.length;i++)a.myAgenda[i]._id==b&&a.myAgenda.splice(i,1)}else alert("Error - please can reload application")})}}]),angular.module("app").controller("ConferencesByScheduleController",["$scope","$stateParams","ConferencesService","$state",function(a,b,c,d){console.log("--- ConferencesByScheduleController ---"),a.day=b.day,a.schedule=b.schedule,a.backAgenda=function(){d.go("tab.agenda")},a.viewConference=function(a){d.go("tab.conference-detail-agenda",{conferenceId:a})},null===localStorage.getItem("conferences")?c.getConferencesResource().query(function(b){a.conferences=b,a.scheduleconferences=c.sortConferenceByStart(a.conferences)},function(){alert("Unable to retrieve conferences list")}):(a.conferences=JSON.parse(localStorage.getItem("conferences")),a.scheduleconferences=c.sortConferenceByStart(a.conferences))}]),angular.module("app").controller("ConferencesController",["$scope","ConferencesService","$ionicLoading","$state","$ionicPopup",function(a,b,c,d,e){console.log("--- ConferencesController ---"),a.conferences=[],a.scheduleconferences=[],a.numButton=1,a.selectedConferenceId=-1,a.getAllConf=function(){null===localStorage.getItem("conferences")?(a.loading=c.show({content:'<div>Loading conferences list<br><figure><img src="img/atos-loader.gif"/></figure></div>',animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0}),b.getLocalConferences().query(function(c){a.conferences=c,a.scheduleconferences=b.sortConferenceByStart(a.conferences),localStorage.setItem("conferences",JSON.stringify(c)),a.loading.hide()},function(){alert("Unable to retrieve conferences list"),a.loading.hide()})):(a.conferences=JSON.parse(localStorage.getItem("conferences")),a.scheduleconferences=b.sortConferenceByStart(a.conferences))},a.updateConference=function(){a.loading=c.show({content:'<div>Update conferences list<br><figure><img src="img/atos-loader.gif"/></figure></div>',animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0}),b.getOnlineConference().query(function(c){b.checkSameConferences(a.conferences,c)?(a.loading.hide(),e.alert({title:"Update conference",content:"You have already a last conference list"})):(a.conferences=c,b.setConferencesResource(c),localStorage.setItem("conferences",JSON.stringify(c)),a.loading.hide(),e.alert({title:"Update conference",content:"You have correctly update conference list"}))},function(){return a.loading.hide(),-1})},a.DisplayConference=function(b){a.selectedConferenceId=a.selectedConferenceId==b._id?-1:b._id},a.viewConference=function(a){d.go("tab.conference-detail",{conferenceId:a})}}]),angular.module("app").controller("DetailConferenceController",["$scope","$stateParams","ConferencesService","MessagesService","$ionicNavBarDelegate","AgendaService","$ionicPopup",function(a,b,c,d,e,f,g){console.log("--- DetailConferenceController ---");var h=b.conferenceId,i=[];a.comments=[],a.conference=[],a.loadingComment="loading...",a.showHideComment="show",a.newComment={name:null,msg:null},a.displayDescription=function(){a.showHideComment="show"==a.showHideComment?"hide":"show"},a.getConference=function(){c.getLocalConferences().query(function(b){i=b,angular.forEach(b,function(b){b._id==h&&(j(),a.conference=b)})},function(){alert("Enable to retrieve a conference with id "+h)})},a.postComment=function(b){var c=d.getOnlineMsgComment(),e=new c;e.name=a.newComment.name,e.msg=a.newComment.msg,e.type="comment",e.date=new Date,e.idConference=b,e.$save(function(){g.alert({title:"Send comment",content:"Your comment has been sent correctly."}).then(function(){j()})},function(){g.alert({title:"Send comment",content:"Impossible to send your comment"})}),a.newComment.name=null,a.newComment.msg=null};var j=function(){d.getOnlineMsgCommentByIdConference(h).query(function(b){a.comments=b,a.loadingComment=""},function(){a.loadingComment=""})};a.back=function(){e.back()},a.addAgenda=function(a){null===localStorage.getItem("myAgenda")?f.addToAgenda(a):f.checkSameScheduleConferenceInAgenda(a,i)===!1?f.addToAgenda(a):g.alert({title:"Impossible",content:"One conference already to add with the same to start"})}}]),angular.module("app").controller("HomeController",["$scope","DateService","ConferencesService","$state",function(a,b,c,d){console.log("--- HomeController ---");var e=new Date(2014,5,3),f=new Date(2014,5,4),g=new Date,h=new Date(g.getFullYear(),g.getMonth(),g.getDate());a.current_day={day:2},a.scheduleConferences=[],a.nextSchedule=null,a.time=b.dateDiff(g,e),a.current_day.day=0===b.compare(e,h)?1:0===b.compare(f,h)?2:0,a.getConf=function(){null===localStorage.getItem("conferences")?c.getLocalConferences().query(function(d){a.conferences=d,a.scheduleConferences=c.sortConferenceByStartByDay(d,a.current_day.day),a.nextSchedule=b.nextSchedule(a.scheduleConferences,g),localStorage.setItem("conferences",JSON.stringify(d))},function(){}):(a.conferences=JSON.parse(localStorage.getItem("conferences")),a.scheduleConferences=c.sortConferenceByStartByDay(a.conferences,a.current_day.day),a.nextSchedule=b.nextSchedule(a.scheduleConferences,g))},a.viewConference=function(a){d.go("tab.conference-detail",{conferenceId:a})}}]),angular.module("techForum.filters",[]).filter("scheduleByConference",function(){return function(a,b,c){var d=[];return angular.forEach(a,function(a){a.when.start==b&&a.day==c&&d.push(a)}),d}}),app.factory("AgendaService",["$ionicPopup",function(a){var b={addToAgenda:function(b){var c=[],d=!1;null===localStorage.getItem("myAgenda")?a.confirm({title:"Add conference",content:"Do you want add this conference on your agenda ?"}).then(function(a){a&&(c=[],c.push(b),localStorage.setItem("myAgenda",JSON.stringify(c)))}):(c=JSON.parse(localStorage.getItem("myAgenda")),angular.forEach(c,function(c){c==b&&(a.alert({title:"Impossible",content:"You are already to add this conference"}),d=!0)}),d===!1&&a.confirm({title:"Add conference",content:"Do you want add this conference on your agenda ?"}).then(function(a){a&&(c.push(b),localStorage.setItem("myAgenda",JSON.stringify(c)))}))},checkSameScheduleConferenceInAgenda:function(a,b){var c=null,d=!1,e=0,f=[],g=JSON.parse(localStorage.getItem("myAgenda"));for(i=0;i<b.length;i++)b[i]._id==a&&(c=b[i]),-1!=g.indexOf(b[i]._id+"")&&f.push(b[i]);for(;d===!1&&e<f.length;)f[e].when.start==c.when.start&&(console.log("Conference with the same start find !"),d=!0),e++;return console.log("Same schedule ? : "+d),d}};return b}]),app.factory("ConferencesService",["$resource",function(a){var b={conferencesResource:[],scheduleConference:[],getOnlineConference:function(){return b.conferencesResource=a("http://techforum-worldline.rhcloud.com//conferences/:id",{id:"@id"}),b.conferencesResource},getLocalConferences:function(){return b.conferencesResource=a("data/conferences.json"),b.conferencesResource},sortConferenceByStart:function(a){var c=[];return angular.forEach(a,function(a){-1==c.indexOf(a.when.start)&&c.push(a.when.start)}),b.scheduleConference=c.sort(),b.scheduleConference},sortConferenceByStartByDay:function(a,c){var d=[];return 0===c?d=[]:angular.forEach(a,function(a){-1==d.indexOf(a.when.start)&&a.day==c&&d.push(a.when.start)}),b.scheduleConference=d.sort(),b.scheduleConference},checkSameConferences:function(a,b){return angular.equals(a,b)},getScheduleConference:function(){return b.scheduleConference},setConferencesResource:function(a){b.conferencesResource=a},getConferencesResource:function(){return b.conferencesResource},conferenceResourceIsEmpty:function(){b.getConferencesResource().query(function(a){return null===a?!0:!1},function(){return!0})}};return b}]),app.factory("DateService",function(){var a={compare:function(a,b){var c=a.getTime()-b.getTime();return 0===c?c:c/Math.abs(c)},dateDiff:function(a,b){var c={},d=b-a;return d=Math.floor(d/1e3),c.sec=d%60,d=Math.floor((d-c.sec)/60),c.min=d%60,d=Math.floor((d-c.min)/60),c.hour=d%24,d=Math.floor((d-c.hour)/24),c.day=d,c},nextSchedule:function(a,b){var c=new Date(2014,5,5)-b;for(a.sort(),i=0;i<a.length;i++){heure=a[i].substring(0,2),minute=a[i].substring(3,5);var d=new Date(b.getFullYear(),b.getMonth(),b.getDate(),heure,minute);if(d>b){if(c>d-b)return c=a[i];console.log("NO d-date<res : "+d+"-"+b+"<"+c)}else console.log(" NO date < d : "+b+" < "+d)}}};return a}),app.factory("MessagesService",["$resource",function(a){var b={commentResource:[],getOnlineMsgCommentByIdConference:function(b){var c="http://techforum-worldline.rhcloud.com//messages/comments/"+b;return a(c)},getOnlineMsgComment:function(){return b.commentResource=a("http://techforum-worldline.rhcloud.com//messages/comments/"),b.commentResource}};return b}]);